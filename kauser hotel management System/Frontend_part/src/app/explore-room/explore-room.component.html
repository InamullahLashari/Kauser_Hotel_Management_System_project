<!-- Success Popup -->
<div *ngIf="successMessage" class="popup success-popup">
  {{ successMessage }}
</div>

<!-- Error Popup -->
<div *ngIf="errorMessage" class="popup error-popup">
  {{ errorMessage }}
</div>

<div class="hotel-rooms-container">
  <h2>Hotel Room Booking</h2>

  <!-- Floor navigation -->
  <div class="floor-nav">
    <button *ngFor="let floor of floors"
            [class.active]="floor === selectedFloor"
            (click)="selectedFloor = floor">
      Floor {{ floor }}
    </button>
  </div>

  <!-- Rooms grid -->
  <div class="rooms-grid">
    <div *ngFor="let room of getRoomsByFloor(selectedFloor)"
         class="room-card"
         [ngClass]="room.status.toLowerCase()"
         (click)="openBookingModal(room)">
      <div class="room-number">{{ room.number }}</div>
      <div class="room-type">{{ room.type }}</div>
      <div class="room-price">${{ room.price }}/night</div>
      <div class="room-status">{{ room.status }}</div>
    </div>
  </div>

  <!-- Booking Modal -->
  <div class="modal-overlay" *ngIf="showBookingModal && selectedRoom">
    <div class="booking-modal">
      <div class="modal-header">
        <h3>Book Room {{ selectedRoom.number }}</h3>
        <button class="close-btn" (click)="showBookingModal = false">&times;</button>
      </div>

      <div class="modal-body">
        <div class="room-info">
          <img [src]="getRoomImage(selectedRoom.type)" alt="{{ selectedRoom.type }} Room">
          <div>
            <p><strong>Type:</strong> {{ selectedRoom.type }}</p>
            <p><strong>Floor:</strong> {{ selectedRoom.floor }}</p>
            <p><strong>Price:</strong> ${{ selectedRoom.price }}/night</p>
          </div>
        </div>

        <!-- Booking Form -->
        <form (ngSubmit)="onSubmit()" #bookingForm="ngForm">
          <div class="form-group">
            <label>Room Number</label>
            <input type="text" [(ngModel)]="bookingData.roomNumber" name="roomNumber" readonly>
          </div>

          <div class="form-group">
            <label>Room Type</label>
            <input type="text" [(ngModel)]="bookingData.roomType" name="roomType" readonly>
          </div>


          <div class="form-group">
            <label>Guest Name</label>
            <input type="text" [(ngModel)]="bookingData.guestName" name="guestName" required>
          </div>

          <div class="form-group">
            <label>CNIC Number</label>
            <input type="text" [(ngModel)]="bookingData.cnicNumber" name="cnicNumber"
                   placeholder="XXXXX-XXXXXXX-X" required>
          </div>

          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" [(ngModel)]="bookingData.phoneNumber" name="phoneNumber"
                   placeholder="03XX-XXXXXXX" required>
          </div>

          <div class="form-group">
            <label>Check-in Date</label>
            <input type="date" [(ngModel)]="bookingData.checkIn" name="checkIn"
                   (change)="calculateNights()" required>
          </div>

          <div class="form-group">
            <label>Check-out Date</label>
            <input type="date" [(ngModel)]="bookingData.checkOut" name="checkOut"
                   (change)="calculateNights()" required>
          </div>

          <div class="form-group">
            <label>Total Nights</label>
            <input type="text" [(ngModel)]="bookingData.totalNights" name="totalNights" readonly>
          </div>

          <div class="form-group">
            <label>Total Price</label>
            <input type="text" [(ngModel)]="bookingData.totalPrice" name="totalPrice" readonly>
          </div>

          <div class="form-group">
            <label>Special Requests</label>
            <textarea [(ngModel)]="bookingData.specialRequests" name="specialRequests"></textarea>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn cancel" (click)="showBookingModal = false">Cancel</button>
            <button type="submit" class="btn confirm" [disabled]="!bookingForm.valid">Confirm Booking</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
